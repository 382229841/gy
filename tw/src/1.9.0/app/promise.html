<!DOCTYPE html>
<html>
<head>
    <meta charset="utf8" />
    <title>购轻松</title>
    <meta name="keywords" content="购轻松,购轻松台湾,购轻松手机,旅游,台湾">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimal-ui" />
    <meta name="apple-mobile-web-app-status-bar-style" content="yes" />
	

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
	<script src="../lib/jquery/zepto.min.js" type="text/javascript"></script>
	<script src="../lib/jquery/touch.js" type="text/javascript"></script> 
    <link href="css/layout.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="app">
		<div class="scrollable">
			 <div class="scrollable-content">
				<div class="viewport">
					<div class="item item1">
					</div>
					<div class="item item2">
					</div>
					<div class="item item3">
					</div>
					<div class="item item4">
					</div>		
				</div>
			 </div>
			 
			 <div class="next">
			   <button>next</button>
			 </div>
			 
			 <div class="pre">
			   <button>pre</button>
			 </div>
		</div>
	</div>
</body>
<script>
	var winWidth=0;
	var winHeight=0;
	var index=1;
	$(document).ready(function(){
		winWidth=$(window).width();
		winHeight=$(window).height();
		$(".scrollable-content").css("min-height",winHeight+"px");
		
		document.body.addEventListener('touchmove',function(e){
			e.preventDefault();
		});
		
		$(".viewport").css("min-height",winHeight+"px");
		$(".item").css("min-height",winHeight+"px");
		$(".viewport").css("transform","translate3D(0,0,0)");
		$(".viewport").css("-webkit-transform","translate3D(0,0,0)");
		$(".viewport").css("-moz-transform","translate3D(0,0,0)");
		$(".viewport").css("-ms-transform","translate3D(0,0,0)");
		
		if(index==4){
			$(".next").hide();
		}
		if(index==1){
			$(".pre").hide();
		}
		
		
		//$('body').bind("touchmove", function(e) {     e.preventDefault();});
		//$('.scrollable-content').bind("touchmove", function(e) {     e.stopPropagation()});
		
		var blockWidth=winWidth>600?600:winWidth;
		
		var next=function(){
			if(index<4){
				$(".viewport").css("transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".viewport").css("-webkit-transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".viewport").css("-moz-transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".viewport").css("-ms-transform","translate3D(-"+index*blockWidth+"px,0,0)");
				$(".pre").show();
				index++;
				if(index==4){
					$(this).hide();
				}
			}else{
				$(".next").hide();
			}		
		};
		var pre=function(){
			if(index>1){
				index--;
				$(".viewport").css("transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");	
				$(".viewport").css("-webkit-transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");
				$(".viewport").css("-moz-transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");
				$(".viewport").css("-ms-transform","translate3D(-"+(index-1)*blockWidth+"px,0,0)");				
				$(".next").show();
				if(index==1){
					$(this).hide();
				}
			}else{
				$(".pre").hide();
			}
		};
		
		$(".next").bind("click",function(){
			next();
		});
		
		$(".viewport").swipeLeft(function(){
			next();
		});
		$(".viewport").swipeRight(function(){
			pre();
		});
		
		$(".pre").bind("click",function(){
			pre();
		});
	});


</script>
</html>
