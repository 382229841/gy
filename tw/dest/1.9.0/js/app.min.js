var app=angular.module("EasyBuy",["ngRoute","ngTouch","mobile-angular-ui"]),onlyWechatOauth=[],isNotBindPhone=[];onlyWechatOauth["views/wechat/myOrder.html"]="myOrder",onlyWechatOauth["views/wechat/myFreeOrder.html"]="myFreeOrder",onlyWechatOauth["views/wechat/myInfo.html"]="myInfo",onlyWechatOauth["views/wechat/car.html"]="car",onlyWechatOauth["views/wechat/buyFree.html"]="buyFree",onlyWechatOauth["views/wechat/easyHandsInfo.html"]="easyHandsInfo",onlyWechatOauth["views/wechat/easyHandsInfoSuccess.html"]="easyHandsInfoSuccess",onlyWechatOauth["views/wechat/easyHandsAgent.html"]="easyHandsAgent",onlyWechatOauth["views/wechat/easyHandsDown.html"]="easyHandsDown",onlyWechatOauth["views/wechat/activity.html"]="activity",onlyWechatOauth["views/wechat/refinedProducts.html"]="refinedProducts",onlyWechatOauth["views/user/my.html"]="myProfile",onlyWechatOauth["views/order/airportServiceOrder.html"]="airportServiceOrder",onlyWechatOauth["views/activity/activity201501.html"]="activity-activityDetail",onlyWechatOauth["views/activity/down.html"]="activity-activityDown",onlyWechatOauth["views/user/myCoupon.html"]="myCoupon",onlyWechatOauth["views/user/myPhone.html"]="myPhone",onlyWechatOauth["views/wechat/myAirportInfo.html"]="wechat-myAirportInfo",onlyWechatOauth["views/wechat/myWiFi.html"]="wechat-myWiFi",isNotBindPhone["activity-activityDetail"]=!0,isNotBindPhone["activity-activityDown"]=!0,isNotBindPhone.myPhone=!0;var baseOauth=[];baseOauth["activity-activityDetail"]=!0,baseOauth["activity-activityDown"]=!0,baseOauth.myPhone=!0,baseOauth.myCoupon=!0,baseOauth.orderList=!0,baseOauth["wechat-myAirportInfo"]=!0,baseOauth["wechat-myWiFi"]=!0;var isContainFind=[];isContainFind["activity-activityDown"]=!0;var preventCache=Math.random().toString(36);app.config(function($routeProvider,$locationProvider,$controllerProvider,$compileProvider,$filterProvider,$provide){app.register={controller:$controllerProvider.register,directive:$compileProvider.directive,filter:$filterProvider.register,factory:$provide.factory,service:$provide.service},app.asyncjs=function(js){return["$q","$route","$rootScope",function($q,$route,$rootScope){var deferred=$q.defer(),dependencies=js;if(Array.isArray(dependencies))for(var i=0;i<dependencies.length;i++)dependencies[i]+="?v="+preventCache;else dependencies+="?v="+preventCache;return $script(dependencies,function(){$rootScope.$apply(function(){deferred.resolve()})}),deferred.promise}]},$routeProvider.when("/products",{templateUrl:"views/goods/productList.html?"+preventCache,controller:"productsController"}).when("/products/:code",{templateUrl:"views/goods/products.html?"+preventCache}).when("/pay/:id",{templateUrl:"views/pay/payment.html?"+preventCache}).when("/pay/:id/:from",{templateUrl:"views/pay/payment.html?"+preventCache}).when("/dividedPay/:orderNum/:fee",{templateUrl:"views/pay/dividedPay.html?"+preventCache}).when("/dividedPay/success",{templateUrl:"views/pay/success2.html?"+preventCache}).when("/address/:payid",{templateUrl:"views/order/address.html?"+preventCache,resolve:{load:app.asyncjs("lib/mobiscroll.custom-2.6.2.js")}}).when("/address/:payid/:buyType",{templateUrl:"views/order/address2.html?"+preventCache,resolve:{load:app.asyncjs("lib/mobiscroll.custom-2.6.2.js")}}).when("/success/:ordersn/:mobile/:address/:time",{templateUrl:"views/pay/success.html?"+preventCache}).when("/success/:ordersn/:token",{templateUrl:"views/pay/success.html?"+preventCache}).when("/success/:ordersn",{templateUrl:"views/pay/success.html?"+preventCache}).when("/success",{templateUrl:"views/pay/success.html?"+preventCache}).when("/error",{templateUrl:"views/pay/error.html?"+preventCache}).when("/error/:orderId/:mobile",{templateUrl:"views/pay/error.html?"+preventCache}).when("/orderDetail",{templateUrl:"views/order/orderDetail.html?"+preventCache}).when("/orderDetail/:id",{templateUrl:"views/order/orderDetail.html?"+preventCache}).when("/orderDetail/:id/:token",{templateUrl:"views/order/orderDetail.html?"+preventCache}).when("/orderList",{templateUrl:"views/order/orderList.html?"+preventCache}).when("/orderList/:token",{templateUrl:"views/order/orderList.html?"+preventCache}).when("/orderInquiry",{templateUrl:"views/order/orderInquiry.html?"+preventCache}).when("/product/:id",{templateUrl:"views/goods/productApp.html?"+preventCache,controller:"productAppController"}).when("/product/:id/:from",{templateUrl:"views/goods/productApp.html?"+preventCache,controller:"productAppController"}).when("/product/:id/:from/:type",{templateUrl:"views/goods/productApp.html?"+preventCache,controller:"productAppController"}).when("/productDetail/:id",{templateUrl:"views/goods/productDetail.html?"+preventCache}).when("/cart",{templateUrl:"views/cart/cart.html?"+preventCache}).when("/airport",{templateUrl:"views/order/airportSelect.html?"+preventCache}).when("/airport/:id",{templateUrl:"views/order/airportSelect.html?"+preventCache}).when("/comment/:id",{templateUrl:"views/app/comment.html?"+preventCache}).when("/myOrder",{templateUrl:"views/wechat/myOrder.html?"+preventCache}).when("/myFreeOrder",{templateUrl:"views/wechat/myFreeOrder.html?"+preventCache}).when("/myInfo",{templateUrl:"views/wechat/myInfo.html?"+preventCache}).when("/car",{templateUrl:"views/wechat/car.html?"+preventCache}).when("/buyFree",{templateUrl:"views/wechat/buyFree.html?"+preventCache}).when("/easyHandsInfo",{templateUrl:"views/wechat/easyHandsInfo.html?"+preventCache}).when("/easyHandsInfoSuccess",{templateUrl:"views/wechat/easyHandsInfoSuccess.html?"+preventCache}).when("/easyHandsDown",{templateUrl:"views/wechat/easyHandsDown.html?"+preventCache}).when("/easyHandsAgent",{templateUrl:"views/wechat/easyHandsAgent.html?"+preventCache}).when("/activity",{templateUrl:"views/wechat/activity.html?"+preventCache}).when("/refinedProducts",{templateUrl:"views/wechat/refinedProducts.html?"+preventCache}).when("/oauth2/:openId/:state",{templateUrl:"views/wechat/oauth2.html?"+preventCache}).when("/wechatOauth/:state",{templateUrl:"views/wechat/wechatOauth.html?"+preventCache}).when("/register",{templateUrl:"views/user/register.html?"+preventCache}).when("/myProfile",{templateUrl:"views/user/my.html?"+preventCache}).when("/myProfile/:from",{templateUrl:"views/user/my.html?"+preventCache}).when("/myCoupon",{templateUrl:"views/user/myCoupon.html?"+preventCache}).when("/myCoupon/:token",{templateUrl:"views/user/myCoupon.html?"+preventCache}).when("/myPhone",{templateUrl:"views/user/myPhone.html?"+preventCache}).when("/myPhone/:mobile",{templateUrl:"views/user/myPhone.html?"+preventCache}).when("/myPhone/:mobile/:token",{templateUrl:"views/user/myPhone.html?"+preventCache}).when("/activity201501",{templateUrl:"views/activity/activity201501.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/wechat/myPhone",{templateUrl:"views/wechat/myPhone.html?"+preventCache}).when("/wechat/myWiFi",{templateUrl:"views/wechat/myWiFi.html?"+preventCache}).when("/wechat/myAirportInfo",{templateUrl:"views/wechat/myAirportInfo.html?"+preventCache}).when("/airportService",{templateUrl:"views/order/airportService.html?"+preventCache}).when("/airportServiceNew",{templateUrl:"views/order/airportServiceNew.html?"+preventCache}).when("/airportServiceOrder",{templateUrl:"views/order/airportServiceOrder.html?"+preventCache,resolve:{load:app.asyncjs("lib/mobiscroll.custom-2.6.2.js")}}).when("/about",{templateUrl:"views/app/about.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/about/:type",{templateUrl:"views/app/about.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/article/:id",{templateUrl:"views/app/article.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/article/:id/:type",{templateUrl:"views/app/article.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/app/wifiDetail",{templateUrl:"views/app/wifiDetail.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/service",{templateUrl:"views/app/serviceTerms.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/service/:type",{templateUrl:"views/app/serviceTerms.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/agent",{templateUrl:"views/app/agent.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/agent/:type",{templateUrl:"views/app/agent.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/carBilling",{templateUrl:"views/app/carBilling.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/carBilling/:type",{templateUrl:"views/app/carBilling.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/mifi",{templateUrl:"views/app/mifi.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/mifi/:type",{templateUrl:"views/app/mifi.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/downloadApp",{templateUrl:"views/wechat/downloadApp.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/download",{templateUrl:"views/wechat/download.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/app/wifiAgent",{templateUrl:"views/app/wifiAgent.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/app/wifiAgent_1_2",{templateUrl:"views/app/wifiAgent_1_2.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/app/airportBus",{templateUrl:"views/app/airportBus.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/app/shuttleService",{controller:"shuttleServiceController",templateUrl:"views/app/shuttleService.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/app/tourDetail/:id",{templateUrl:"views/app/tourDetail.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/app/apppages.js")}}).when("/update",{templateUrl:"views/update.html?"+preventCache}).when("/erroinfo",{templateUrl:"views/erroinfo.html?"+preventCache}).when("/activity/activity01",{templateUrl:"views/activity/activity-01.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/activityDetail",{templateUrl:"views/activity/activity201501.html?"+preventCache,controller:"activity201501Controller",resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/activityDown",{templateUrl:"views/activity/down.html?"+preventCache,controller:"activityDownController",resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/xrhl",{templateUrl:"views/activity/xrhl.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/full",{templateUrl:"views/activity/full.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/guide",{templateUrl:"views/activity/guide.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/half",{templateUrl:"views/activity/half.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/xbl",{templateUrl:"views/activity/xbl.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/taxFreeStore",{templateUrl:"views/activity/taxFreeStore.html?"+preventCache}).when("/activity/activityDetail/:id",{templateUrl:"views/activity/activity201501.html?"+preventCache,controller:"activity201501Controller",resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/activityDetail/:id/:type",{templateUrl:"views/activity/activityDetail.html?"+preventCache,controller:"activityDetailController",resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/mothersDay",{templateUrl:"views/activity/mothersDay.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/beautySummer",{templateUrl:"views/activity/beautySummer.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/may",{templateUrl:"views/activity/may.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/xblnew",{templateUrl:"views/activity/xblnew.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/groupBuy",{templateUrl:"views/activity/groupBuy.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/tour",{templateUrl:"views/activity/tour.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/tangcun",{templateUrl:"views/activity/tangcun.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/beautyLife",{templateUrl:"views/activity/beautyLife.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activity.js")}}).when("/activity/twGift",{templateUrl:"views/activity/twGift_2.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activityDown.js")}}).when("/activity/twGift_3",{templateUrl:"views/activity/twGift_3.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/activityDown.js")}}).when("/activity/gyy",{templateUrl:"views/activity/gyy.html?"+preventCache,resolve:{load:app.asyncjs("js/controller/activity/fullGive.js")}}).otherwise({redirectTo:"/products"})}),app.service("analytics",["$rootScope","$window","$location",function(){}]),app.run(function($rootScope,$location){$rootScope.$on("$routeChangeStart",function(event,next,current){$rootScope.winWidth=$(window).width(),$rootScope.winHeight=$(window).height();var tokenInfo=getToken();if(tokenInfo&&(tokenInfo.openId||removeToken()),next.templateUrl&&onlyWechatOauth[next.templateUrl.split("?")[0]]&&!$rootScope.isOauth2&&"views/wechat/oauth2.html"!=next.templateUrl&&easybuy.isWechat&&!(getToken()&&getToken().token&&getToken().mobile&&getToken().mobile.length>6)){var state=onlyWechatOauth[next.templateUrl.split("?")[0]];1==isNotBindPhone[state]&&getToken()&&getToken().token||(isContainFind[state]&&setFind($location.search()),$location.path("/wechatOauth/"+state))}next.templateUrl&&($rootScope.goeasy="views/activity/activity-01.html"==next.templateUrl?"台湾直购，正品低价，万元红包等你来抢！！":"购轻松"),current&&current.loadedTemplateUrl&&"views/activity/activity-01.html"==current.loadedTemplateUrl&&location.reload(),$(document).attr("title",$rootScope.goeasy),hideLoading()})}),app.controller("erroinfoController",function(){setTimeout(function(){window.location.href="#/products"},1e3)}),app.controller("mainController",function($rootScope,$window,$scope,httpRequest,dataStringify){$rootScope.goeasy="购轻松",$rootScope.categoryId=0,$rootScope.categoryIndex=1,$rootScope.categoryCount=1,$rootScope.initNav=function(cat){$("#scroller2ul").html("");var actived="border-bottom: 3px solid #F14F57;color:#F14F57;",lis=0==$rootScope.categoryId?'<li style="'+actived+'">':'<li style="">';lis+='<a href="#/products">首页</a></li>';var liCount=1;$rootScope.categoryIndex=1;for(var i=0;i<cat.length;i++)-1==cat[i].name.indexOf("台湾必买")&&($rootScope.categoryId==cat[i].code?(lis=lis+'<li style="'+actived+'"><a href="#/products/'+cat[i].code+'">'+cat[i].name+" </a></li>",$rootScope.categoryIndex=i+2):lis=lis+'<li><a href="#/products/'+cat[i].code+'">'+cat[i].name+" </a></li>",liCount++);$rootScope.categoryCount=liCount,$("#scroller2ul").html(lis),$("#scroller2").css("width",25*liCount+"%"),$("#scroller2ul").css("width",25*liCount+"%"),$("#scroller2ul li").css("width",100/liCount+"%");var generateScroll=function(){var myScroll=new IScroll("#wrapper2",{eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1}),mod=parseInt($rootScope.categoryIndex/4),offset=$("#scroller2ul li").width()*mod;myScroll.scrollTo(-offset,0)};"undefined"==typeof IScroll?$.ajax({url:"/lib/iscroll.js",dataType:"script",cache:!0,success:function(){generateScroll()}}):generateScroll()},$rootScope.$on("$routeChangeStart",function(event,next){$rootScope.loading=!next.templateUrl||"views/wechat/wechatOauth.html"==next.templateUrl&&"views/wechat/oauth2.html"==next.templateUrl?!0:!0,location.hash.indexOf("activityDown")>-1||location.hash.indexOf("activityDetail")>-1}),$rootScope.$on("$routeChangeSuccess",function(){$rootScope.loading=!1}),$scope.audioControls=$("#audioControls")[0],$rootScope.hideOverlay=function(){$rootScope.loading=!1},$scope.initPlay=function(){if(""==location.hash||"#/products"==location.hash){var ctr=$scope.audioControls;ctr.play()}},$scope.play=function(){var ctr=$scope.audioControls;ctr.paused?(ctr.play(),$("#div-nav-music-controls").removeClass("div-nav-music-pause"),$("#div-nav-music-controls").addClass("div-nav-music")):(ctr.pause(),$("#div-nav-music-controls").removeClass("div-nav-music"),$("#div-nav-music-controls").addClass("div-nav-music-pause"))},$scope.imageServiceUrl=imageServiceUrl,$rootScope.isOauth2=!1,$rootScope.oauth2=function(state,type){$window.location=webchatOauth(state,type)},httpRequest.APIPOST("/goods/category",dataStringify("platform=all"),{"content-type":"application/x-www-form-urlencoded"}).then(function(result){if(result&&result.code==statusCode.Success){var cat=result.result;$rootScope.categories=cat.slice(1)}else alertWarning(result.msg)})});